<!DOCTYPE html>
<html>
<head>
  <link rel="icon" 
    type="image/png" 
    href="/assets/images/favicon1.png">
  <title><%= full_title(yield(:title)) %></title>
  <meta charset='utf-8'>
  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
  <meta property="fb:app_id"      content="388701887900457" /> 
  <meta property="og:url"         content="https://www.thefamilytales.com/" /> 
  <meta property="og:title"       content="FamilyTales | Start celebrating your family stories today." /> 
  <meta property="og:description" content="FamilyTales enables families to capture and share their precious memories (stories, pictures, videos and audio clips) in a digital storybook that can be passed on for generations to come! You can also print off your personalized storybook as a keepsakes, or as a gift others." /> 
  <meta property="og:image"       content="https://www.thefamilytales.com/assets/familytales-screenshot.png" />
  
  
   <!-- Google analytics start -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42669021-1', 'thefamilytales.com');
    ga('send', 'pageview');

  </script>
  <!-- Google analytics end --> 

  <!--Start MixPanel javascript code -->
<script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);
b._i.push([a,e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
mixpanel.init("27611ec71b5a66f008120ac924efca99");</script>
<!-- End Mixpanel -->
  
  <%= stylesheet_link_tag "application-bookshelf", media: "all" %>
  <%= javascript_include_tag "application-bookshelf" %>

  <% if ! cookies[:first_time_bookshelf].blank? %>
    <script type="text/javascript">
      $(window).load(function(){
        $('.tourcontrols').removeClass('hide');
      });
    </script>
  <% end %>

  <script type="text/javascript">
    $(window).load(function(){
      $("#new_profile").submit(function(){
        if($('#profile_first_name').val() != "" && $('#profile_last_name').val() != "" ) { 
          $('.startstorybook').addClass('hide');
          $('.loading').removeClass('hide');
        }
      });

      $(".newstorybooklink").click(function(){
        introJs().exit()
      });
    });
  </script>

<!-- CrazyEgg -->
  <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0015/8166.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script>
<!-- End CrazyEgg -->
  

  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %>  <!-- partial app/views/layouts/_shim.html.erb -->
</head>

<!--Mixpanel event -->
<script type="text/javascript">
  mixpanel.track("Bookshelf loaded");
</script>
<!--end Mixpanel event -->

<body class="columns-4">
  <div class="headerandbody">
  <%= render 'layouts/header' %>
  <div class="mainContainer">
    <% flash.each do |key, value| %>
       <div class="alert alert-<%= key %>"><%= value.html_safe %></div>
    <% end %>
  	<%= yield %>
    <%= debug(params) if Rails.env.development? %>
  </div>
  </div>

<%= render 'shared/new_user_storybook_modal' %>
<div class="welcomefamilytales-coachmark hide">
  <%= image_tag("/assets/images/coachmarks/welcomebookshelf.png") %>
  <div class="sneakpeek_buttons">
    <a class="btn skipguide" >Done</a> &nbsp; or &nbsp;
    <button class="green_button nextguide">Next</button>
  </div>
</div>  

  <script type="text/javascript">
  function startIntro(){
    $('.tourcontrols').addClass('hide');
    introJs().setOption('skipLabel', 'Exit').onchange(function(targetElement) {
        switch (targetElement.getAttribute("data-step"))
        {


            case "1":
              $(".introjs-tooltip").css("margin-left", "400px");
            break;

            case "2":
              $(".introjs-tooltip").css("margin-left", "0px");
            break;

            case "3":
            break;
        }
      }).start().onexit(function() {
        $(".gridster").removeClass('shiftright');
        $(".gridster").removeClass("introjs-showElement");
        $("header").removeClass("intro-showElement");
        $.removeCookie("first_time_bookshelf");
      });
    }

    function endIntro () {

      $.removeCookie("first_time_bookshelf");
      $('.tourcontrols').addClass('hide');
    }
  </script>
<!-- fluidvid script starts: makes vimeo vid responsive -->
<script type="text/javascript">
  window.fluidvids = (function (window, document, undefined) {

    'use strict';

    /*
     * Constructor function
     */
    var Fluidvids = function (elem) {
      this.elem = elem;
    };

    /*
     * Prototypal setup
     */
    Fluidvids.prototype = {

      init : function () {

        var videoRatio = (this.elem.height / this.elem.width) * 100;
        this.elem.style.position = 'absolute';
        this.elem.style.top = '0';
        this.elem.style.left = '0';
        this.elem.width = '100%';
        this.elem.height = '100%';

        var wrap = document.createElement('div');
        wrap.className = 'fluidvids';
        wrap.style.width = '100%';
        wrap.style.position = 'relative';
        wrap.style.paddingTop = videoRatio + '%';
        
        var thisParent = this.elem.parentNode;
        thisParent.insertBefore(wrap, this.elem);
        wrap.appendChild(this.elem);

      }

    };

    /*
     * Initiate the plugin
     */
    var iframes = document.getElementsByTagName( 'iframe' );

    for (var i = 0; i < iframes.length; i++) {
      var players = /www.youtube.com|player.vimeo.com/;
      if (iframes[i].src.search(players) > 0) {
        new Fluidvids(iframes[i]).init();
      }
    }

  })(window, document);
</script>
<!-- fluidvid script ends -->
  <!-- begin olark code -->
<script data-cfasync="false" type='text/javascript'>/*<![CDATA[*/window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){
f[z]=function(){
(a.s=a.s||[]).push(arguments)};var a=f[z]._={
},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){
f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={
0:+new Date};a.P=function(u){
a.p[u]=new Date-a.p[0]};function s(){
a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){
hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){
return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){
b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{
b.contentWindow[g].open()}catch(w){
c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{
var t=b.contentWindow[g];t.write(p());t.close()}catch(x){
b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({
loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
/* custom configuration goes here (www.olark.com/documentation) */
olark.identify('2619-844-10-8667');/*]]>*/</script><noscript><a href="https://www.olark.com/site/2619-844-10-8667/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript>
<!-- end olark code -->
</body>
</html>
